# STM32 Crash Reporter

This library implements a basic crash reporter for Cortex-M3 and Cortex-M4 based STM32 microcontrollers.
It's aim is to be small and helpful for debugging runtime issues on-chip.

The library is not intended for use with some on-chip RTOS and will likely need some modifications
to work correctly in such environments.

## Usage

This library assumes you've a STM32 CubeMX project set up.
The easiest way to do this is [cubemx.cmake](https://github.com/patrislav1/cubemx.cmake).

In your project configuration you need to ensure, that no code is generated by STM32CubeMX
for the following fault handler symbols:

* `NMI_Handler`
* `HardFault_Handler`
* `MemManage_Handler`
* `BusFault_Handler`
* `UsageFault_Handler`

If you need some of those handlers handled by your own code you can drop the appropriate assembly file
that implements that respective handler. All the `handler_*.s` files are stubs that collect the necessary
information needed to handle those interrupts in high-level C.

To replace any of those handlers, but still retain the overall functionality you can easily do so:
In your handler you need to save the full register context on ISR entry into the global variable `cpustate` and
call the appropriate high-level handler `cr_handle_*` from your code.

## License

This library was written by Benny "BenBE" Baumann and is licensed under AGPLv3.
See the [LICENSE file](LICENSE) for more details.
